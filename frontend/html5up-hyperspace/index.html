<!DOCTYPE HTML>
<!--
	Hyperspace by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>API Testing Tool</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>

        <style>
          /* Your custom CSS here */
          body, section {
            padding: 2rem;
          }

          body, input, textarea, button {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #333;
          }

          h1, h2, h3 {
            font-weight: 600;
            color: #222;
          }

          .result-heading {
            margin-top: 2rem;
            color: #222;
            font-size: 1.5rem;
            border-bottom: 2px solid #eee;
            padding-bottom: 0.3rem;
            font-weight: 500;
          }

          .result-box {
            margin-top: 1rem;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #fff;
			color: #222;
          }

          .test-result.success {
            background-color: #e6ffed;
            border-left: 5px solid #4CAF50;
            padding: 1rem;  
          }

          .test-result.error {
            background-color: #ffe6e6;
            border-left: 5px solid #f44336;
            padding: 1rem;
          }

          .test-result h3 {
            margin-top: 0;
          }

          .error {
            color: red;
            font-weight: bold;
            padding: 0.5rem;
          }
        </style>
	</head>
	
	<body class="is-preload">

        <!-- Sidebar -->
        <section id="sidebar">
          <div class="inner">
            <nav>
              <ul>
				        <li><a href="#Welcome">Welcome</a></li>
                <li><a href="#Api-Tester">API Testing Tool</a></li>
              </ul>
            </nav>
          </div>
        </section>


		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Custom welcome Section -->
                <section id="hero" class="wrapper style1 fullscreen fade-up" style="text-align: center;">
                  <div class="inner">
                    <h1 style="font-size: 3.5em; font-weight: 700; color: white;">API Testing Tool</h1>
                    <p style="color: #ccc;">Easily upload or input your JSON test cases and get quick results.</p>
                  </div>
                </section>

                <!-- Welcome Note -->
                <section id="Welcome" class="wrapper style2 fade-up">
                  <div class="inner">
                    <h2>Welcome to the API Testing Tool</h2>
                    <p>This is a lightweight and user-friendly tool that allows developers to test RESTful APIs instantly. Simply select the method, enter the endpoint URL, and provide the necessary payload if needed.</p>
                    <p>The response will be displayed instantly below, along with the HTTP status code. Designed for speed, simplicity, and efficiency — all in one single-page interface.</p>
                  </div>
                </section>

                <!-- API Tester Section -->
                <section id="Api-Tester" class="wrapper style2 fade-up">
                  <div class="inner">
                    <h2>API Testing Tool</h2>
                    <div class="upload-block">
                      <input type="file" id="jsonFile" accept=".json">
                      <textarea id="manualInput" placeholder="Or enter your JSON test case manually..." rows="6"></textarea>
                      <button id="runTest">Run Test</button>
                    </div>

                    <div class="result-heading">RESULT</div>
                    <div id="resultBox" class="result-box"></div>
                  </div>
                </section>

			</div>

		<!-- Footer -->
			<footer id="footer" class="wrapper style1-alt">
				<div class="inner">
					<ul class="menu">
						<li>&copy; Untitled. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>
				</div>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

        <!-- Your custom script -->
        <script>
        document.getElementById("runTest").addEventListener("click", async function () {
          const fileInput = document.getElementById("jsonFile");
          const manualInput = document.getElementById("manualInput").value;
          const resultBox = document.getElementById("resultBox");

          let testData;

          // Load JSON from file or textarea
          if (fileInput.files.length > 0) {
            const file = fileInput.files[0];
            const text = await file.text();
            try {
              testData = JSON.parse(text);
            } catch (err) {
              resultBox.innerHTML = `<div class="test-result error">❌ Invalid JSON file.</div>`;
              return;
            }
          } else if (manualInput.trim() !== "") {
            try {
              testData = JSON.parse(manualInput);
            } catch (err) {
              resultBox.innerHTML = `<div class="test-result error">❌ Invalid manual JSON input.</div>`;
              return;
            }
          } else {
            resultBox.innerHTML = `<div class="test-result error">❌ Please provide a test case.</div>`;
            return;
          }

          try {
            // Send test case to backend
            const res = await fetch("http://127.0.0.1:5001/test", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(testData)
            });


            const apiResponse = await res.json();

            // Show actual backend response
            resultBox.innerHTML = `
              <div class="test-result ${apiResponse.status === "Test Passed" ? "success" : "error"}">
                <h3>${apiResponse.status === "Test Passed" ? "✅ Test Passed" : "❌ Test Failed"}</h3>
                <p><strong>URL Tested:</strong> ${apiResponse.url_tested}</p>
                <p><strong>Method:</strong> ${apiResponse.method}</p>
                <p><strong>Status Code:</strong> ${apiResponse.status_code}</p>
                <p><strong>Execution Time:</strong> ${apiResponse.execution_time_ms} ms</p>
                <p><strong>Message:</strong> ${apiResponse.message}</p>
                <pre>${JSON.stringify(apiResponse.response_body, null, 2)}</pre>
              </div>
            `;
          } catch (err) {
            resultBox.innerHTML = `<div class="test-result error">❌ Error: ${err.message}</div>`;
          }
        });
        </script>

	</body>
</html>